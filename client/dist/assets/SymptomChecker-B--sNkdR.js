import{c as C,r as l,b as O,j as e,d as D,P as H,e as V,f as W,L as G,a as E,m as v,B as P,X as L,u as K,g as Q,M as X,h as Y,_ as J,i as N}from"./index-Dz-RQC1z.js";import{C as k}from"./Card-BNInW5pe.js";import{I as Z,S as z,C as I}from"./Select-1C5k4zr3.js";import{T as ee,a as se,L as te,D as oe}from"./Disclaimer-DreXzsxf.js";import{C as S}from"./circle-alert-Qxik4jpv.js";import{S as ae,A as re}from"./stethoscope-B8OSOeLQ.js";import{analyzeSymptoms as ne}from"./api-ebqt3Pvv.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=C("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=C("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=C("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=C("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=C("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=C("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=C("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);class xe extends l.Component{getSnapshotBeforeUpdate(i){const s=this.props.childRef.current;if(s&&i.isPresent&&!this.props.isPresent){const t=this.props.sizeRef.current;t.height=s.offsetHeight||0,t.width=s.offsetWidth||0,t.top=s.offsetTop,t.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ue({children:o,isPresent:i}){const s=l.useId(),t=l.useRef(null),h=l.useRef({width:0,height:0,top:0,left:0}),{nonce:x}=l.useContext(O);return l.useInsertionEffect(()=>{const{width:c,height:m,top:y,left:d}=h.current;if(i||!t.current||!c||!m)return;t.current.dataset.motionPopId=s;const r=document.createElement("style");return x&&(r.nonce=x),document.head.appendChild(r),r.sheet&&r.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${m}px !important;
            top: ${y}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(r)}},[i]),e.jsx(xe,{isPresent:i,childRef:t,sizeRef:h,children:l.cloneElement(o,{ref:t})})}const he=({children:o,initial:i,isPresent:s,onExitComplete:t,custom:h,presenceAffectsLayout:x,mode:c})=>{const m=D(ye),y=l.useId(),d=l.useCallback(n=>{m.set(n,!0);for(const a of m.values())if(!a)return;t&&t()},[m,t]),r=l.useMemo(()=>({id:y,initial:i,isPresent:s,custom:h,onExitComplete:d,register:n=>(m.set(n,!1),()=>m.delete(n))}),x?[Math.random(),d]:[s,d]);return l.useMemo(()=>{m.forEach((n,a)=>m.set(a,!1))},[s]),l.useEffect(()=>{!s&&!m.size&&t&&t()},[s]),c==="popLayout"&&(o=e.jsx(ue,{isPresent:s,children:o})),e.jsx(H.Provider,{value:r,children:o})};function ye(){return new Map}const _=o=>o.key||"";function F(o){const i=[];return l.Children.forEach(o,s=>{l.isValidElement(s)&&i.push(s)}),i}const U=({children:o,custom:i,initial:s=!0,onExitComplete:t,presenceAffectsLayout:h=!0,mode:x="sync",propagate:c=!1})=>{const[m,y]=V(c),d=l.useMemo(()=>F(o),[o]),r=c&&!m?[]:d.map(_),n=l.useRef(!0),a=l.useRef(d),u=D(()=>new Map),[p,b]=l.useState(d),[f,A]=l.useState(d);W(()=>{n.current=!1,a.current=d;for(let j=0;j<f.length;j++){const g=_(f[j]);r.includes(g)?u.delete(g):u.get(g)!==!0&&u.set(g,!1)}},[f,r.length,r.join("-")]);const B=[];if(d!==p){let j=[...d];for(let g=0;g<f.length;g++){const w=f[g],M=_(w);r.includes(M)||(j.splice(g,0,w),B.push(w))}x==="wait"&&B.length&&(j=B),A(F(j)),b(d);return}const{forceRender:$}=l.useContext(G);return e.jsx(e.Fragment,{children:f.map(j=>{const g=_(j),w=c&&!m?!1:d===f||r.includes(g),M=()=>{if(u.has(g))u.set(g,!0);else return;let R=!0;u.forEach(q=>{q||(R=!1)}),R&&($==null||$(),A(a.current),c&&(y==null||y()),t&&t())};return e.jsx(he,{isPresent:w,initial:!n.current||s?void 0:!1,custom:w?void 0:i,presenceAffectsLayout:h,mode:x,onExitComplete:w?void 0:M,children:j},g)})})},ge=({onSubmit:o,loading:i})=>{const{t:s}=E(),[t,h]=l.useState({age:"",gender:"",symptoms:"",duration:""}),[x,c]=l.useState({}),m=[{value:"male",label:s("symptoms.form.options.male")},{value:"female",label:s("symptoms.form.options.female")},{value:"other",label:s("symptoms.form.options.other")},{value:"prefer-not-to-say",label:s("symptoms.form.options.prefer_not_to_say")}],y=[{value:"few-hours",label:s("symptoms.form.options.hours")},{value:"1-day",label:s("symptoms.form.options.days_1")},{value:"2-3-days",label:s("symptoms.form.options.days_2_3")},{value:"1-week",label:s("symptoms.form.options.weeks_1")},{value:"2-weeks",label:s("symptoms.form.options.weeks_2")},{value:"1-month",label:s("symptoms.form.options.months_1")}],d=()=>{const a={};return(!t.age||t.age<1||t.age>120)&&(a.age=s("symptoms.form.errors.age")),(!t.symptoms||t.symptoms.trim().length<10)&&(a.symptoms=s("symptoms.form.errors.symptoms")),c(a),Object.keys(a).length===0},r=a=>{a.preventDefault(),d()&&o(t)},n=(a,u)=>{h(p=>({...p,[a]:u})),x[a]&&c(p=>({...p,[a]:null}))};return e.jsxs(v.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},onSubmit:r,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(Z,{label:s("symptoms.form.age"),type:"number",placeholder:s("symptoms.form.age_placeholder"),value:t.age,onChange:a=>n("age",a.target.value),error:x.age,icon:pe,required:!0,min:"1",max:"120"}),e.jsx(z,{label:s("symptoms.form.gender"),options:m,value:t.gender,onChange:a=>n("gender",a.target.value),placeholder:s("symptoms.form.gender_placeholder")})]}),e.jsx(ee,{label:s("symptoms.form.symptoms"),placeholder:s("symptoms.form.symptoms_placeholder"),value:t.symptoms,onChange:a=>n("symptoms",a.target.value),error:x.symptoms,required:!0,rows:6}),e.jsx(z,{label:s("symptoms.form.duration"),options:y,value:t.duration,onChange:a=>n("duration",a.target.value),placeholder:s("symptoms.form.duration_placeholder"),icon:ce}),e.jsx(P,{type:"submit",loading:i,fullWidth:!0,size:"lg",icon:de,iconPosition:"right",children:s("symptoms.form.submit")}),e.jsx("p",{className:"text-sm text-gray-500 text-center",children:s("symptoms.form.privacy")})]})},fe=({variant:o="info",title:i,children:s,onClose:t,className:h=""})=>{const c={info:{bg:"bg-blue-50 border-blue-200",icon:me,iconColor:"text-blue-600",titleColor:"text-blue-900",textColor:"text-blue-800"},success:{bg:"bg-green-50 border-green-200",icon:T,iconColor:"text-green-600",titleColor:"text-green-900",textColor:"text-green-800"},warning:{bg:"bg-amber-50 border-amber-200",icon:se,iconColor:"text-amber-600",titleColor:"text-amber-900",textColor:"text-amber-800"},error:{bg:"bg-red-50 border-red-200",icon:S,iconColor:"text-red-600",titleColor:"text-red-900",textColor:"text-red-800"},emergency:{bg:"bg-red-600 border-red-700",icon:S,iconColor:"text-white",titleColor:"text-white",textColor:"text-red-100"}}[o],m=c.icon;return e.jsx(v.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`
        ${c.bg} 
        border-2 rounded-xl p-4 
        ${h}
      `,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(v.div,{animate:o==="emergency"?{scale:[1,1.2,1]}:{},transition:{duration:.5,repeat:o==="emergency"?1/0:0},children:e.jsx(m,{className:`w-6 h-6 flex-shrink-0 ${c.iconColor}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[i&&e.jsx("h4",{className:`font-bold ${c.titleColor} mb-1`,children:i}),e.jsx("div",{className:`text-sm ${c.textColor} leading-relaxed`,children:s})]}),t&&e.jsx("button",{onClick:t,className:`${c.iconColor} hover:opacity-70 transition-opacity`,"aria-label":"Close alert",children:e.jsx(L,{className:"w-5 h-5"})})]})})},be=({data:o,onFollowUp:i,isUpdating:s})=>{const{t}=E(),[h,x]=l.useState({causes:!0,advice:!0,followUp:!1}),c=r=>{x(n=>({...n,[r]:!n[r]}))},y=o.emergency?{color:"bg-red-100 text-red-800 border-red-200",label:t("symptoms.analysis.emergency")}:o.see_doctor?{color:"bg-amber-100 text-amber-800 border-amber-200",label:t("symptoms.analysis.see_doctor")}:{color:"bg-green-100 text-green-800 border-green-200",label:t("symptoms.analysis.low_concern")},d=({title:r,icon:n,isOpen:a,onToggle:u,children:p})=>e.jsxs(k,{className:"overflow-hidden",padding:"none",hover:!1,animate:!1,children:[e.jsxs("button",{onClick:u,className:"w-full flex items-center justify-between p-4 sm:p-6 hover:bg-gray-50 transition-colors","aria-expanded":a,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:e.jsx(n,{className:"w-5 h-5 text-[#2B6CB0]"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:r})]}),a?e.jsx(le,{className:"w-5 h-5 text-gray-400"}):e.jsx(I,{className:"w-5 h-5 text-gray-400"})]}),e.jsx(U,{children:a&&e.jsx(v.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6 pt-0",children:p})})})]});return e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t("symptoms.analysis.title")}),e.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold border ${y.color}`,children:y.label})]}),o.see_doctor&&!o.emergency&&e.jsx(fe,{variant:"warning",title:t("symptoms.analysis.doctor_recommended"),children:t("symptoms.analysis.doctor_recommended_desc")}),e.jsx(d,{title:t("symptoms.analysis.possible_causes"),icon:ae,isOpen:h.causes,onToggle:()=>c("causes"),children:o.possible_causes&&o.possible_causes.length>0?e.jsx("ul",{className:"space-y-3",children:o.possible_causes.map((r,n)=>e.jsxs(v.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:n*.1},className:"flex items-start gap-3",children:[e.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-[#2B6CB0] text-white rounded-full flex items-center justify-center text-sm font-bold",children:n+1}),e.jsx("span",{className:"text-gray-700 leading-relaxed",children:r})]},n))}):e.jsx("p",{className:"text-gray-500",children:t("symptoms.analysis.no_causes")})}),e.jsx(d,{title:t("symptoms.analysis.care_advice"),icon:te,isOpen:h.advice,onToggle:()=>c("advice"),children:o.care_advice?e.jsx("div",{className:"prose prose-sm max-w-none text-gray-700",children:e.jsx("p",{className:"leading-relaxed whitespace-pre-line",children:o.care_advice})}):e.jsx("p",{className:"text-gray-500",children:t("symptoms.analysis.no_advice")})}),o.follow_up_questions&&o.follow_up_questions.length>0&&e.jsx(d,{title:t("symptoms.analysis.refine"),icon:ie,isOpen:h.followUp,onToggle:()=>c("followUp"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:t("symptoms.analysis.refine_desc")}),e.jsxs("form",{onSubmit:r=>{r.preventDefault();const n=new FormData(r.target),a={};o.follow_up_questions.forEach((p,b)=>{a[p]=n.get(`question_${b}`)});const u=Object.entries(a).map(([p,b])=>`Q: ${p}
A: ${b}`).join(`

`);i&&i(u)},className:"space-y-4",children:[o.follow_up_questions.map((r,n)=>e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:r}),e.jsx("textarea",{name:`question_${n}`,className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#2B6CB0] focus:border-transparent outline-none transition-all",rows:"2",placeholder:"Your answer...",required:!0})]},n)),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsxs("button",{type:"submit",disabled:s,className:"px-6 py-2 bg-[#2B6CB0] text-white rounded-lg font-semibold hover:bg-[#2C5282] transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[t(s?"symptoms.analysis.updating":"symptoms.analysis.update_btn"),!s&&e.jsx(I,{className:"w-4 h-4 rotate-[-90deg]"})]})})]})]})}),e.jsx(k,{className:"!bg-gray-50",hover:!1,animate:!1,children:e.jsx("div",{className:"flex items-center gap-4",children:o.see_doctor?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 bg-amber-100 rounded-full",children:e.jsx(S,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:t("symptoms.analysis.doctor_recommended")}),e.jsx("p",{className:"text-gray-600 text-sm",children:t("symptoms.analysis.doctor_recommended_desc")})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(T,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:t("symptoms.analysis.monitor_home")}),e.jsx("p",{className:"text-gray-600 text-sm",children:t("symptoms.analysis.monitor_home_desc")})]})]})})}),e.jsx(oe,{})]})},je=({onClose:o})=>{const i=K(),{t:s}=E();return e.jsx(U,{children:e.jsx(v.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",damping:15},className:"fixed inset-x-0 top-16 sm:top-20 z-40 px-4",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"bg-red-600 text-white rounded-2xl shadow-2xl p-6 sm:p-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-red-500 animate-pulse opacity-30"}),e.jsxs("div",{className:"relative z-10",children:[o&&e.jsx("button",{onClick:o,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-lg transition-colors","aria-label":"Close alert",children:e.jsx(L,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(v.div,{animate:{scale:[1,1.2,1]},transition:{duration:.5,repeat:1/0},children:e.jsx(S,{className:"w-10 h-10"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold",children:["⚠️ ",s("symptoms.emergency.title")]}),e.jsx("p",{className:"text-red-100",children:s("symptoms.emergency.subtitle")})]})]}),e.jsx("p",{className:"text-red-100 mb-6 leading-relaxed",children:s("symptoms.emergency.message")}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(P,{variant:"outline",className:"!bg-white !text-red-600 hover:!bg-red-50 !border-white",icon:Q,onClick:()=>window.location.href="tel:108",children:s("symptoms.emergency.call_btn")}),e.jsx(P,{variant:"outline",className:"!border-white/50 !text-white hover:!bg-white/10",icon:X,onClick:()=>i("/hospitals"),children:s("symptoms.emergency.find_hospital")})]})]})]})})})})},Ee=()=>{const{t:o,i18n:i}=E(),[s,t]=l.useState(!1),[h,x]=l.useState(null),[c,m]=l.useState(!1),[y,d]=l.useState(""),r=async u=>{t(!0),x(null),m(!1);try{const p=`
        Patient Information:
        - Age: ${u.age} years
        - Gender: ${u.gender||"Not specified"}
        - Duration: ${u.duration||"Not specified"}
        
        Symptoms:
        ${u.symptoms}
      `.trim();d(p);const b=await ne({symptoms:p,language:i.language}),f=b.data||b;x(f),f.emergency?(m(!0),N.error("Emergency symptoms detected! Please seek immediate medical care.")):f.see_doctor?N.warning("We recommend consulting a healthcare provider."):N.success("Analysis complete!")}catch(p){console.error("Analysis error:",p),N.error(p.message||"Failed to analyze symptoms. Please try again.")}finally{t(!1)}},n=()=>{x(null),m(!1),d("")},a=async u=>{t(!0);try{const p=await J(()=>import("./api-ebqt3Pvv.js"),[]).then(f=>f.submitFollowUp({original_symptoms:y,follow_up_answers:u,language:i.language})),b=p.data||p;x(b),N.success("Analysis updated with new information!")}catch(p){console.error("Follow-up error:",p),N.error("Failed to update analysis.")}finally{t(!1)}};return e.jsxs("div",{className:"min-h-screen bg-[#F7FAFC]",children:[c&&e.jsx(je,{onClose:()=>m(!1)}),e.jsx("section",{className:"bg-white border-b border-gray-100",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:e.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-blue-50 rounded-2xl mb-4",children:e.jsx(re,{className:"w-8 h-8 text-[#2B6CB0]"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-3",children:o("symptoms.title")}),e.jsx("p",{className:"text-lg text-gray-600 max-w-xl mx-auto",children:o("symptoms.subtitle")})]})})}),e.jsx("section",{className:"py-8 sm:py-12",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:s?e.jsx(k,{children:e.jsx(Y,{message:o("symptoms.loading"),size:"default"})}):h?e.jsxs("div",{className:"space-y-6",children:[e.jsx(be,{data:h,onFollowUp:a,isUpdating:s}),e.jsx("div",{className:"text-center",children:e.jsxs("button",{onClick:n,className:"text-[#2B6CB0] font-semibold hover:underline",children:["← ",o("symptoms.new_analysis")]})})]}):e.jsx(k,{children:e.jsx(ge,{onSubmit:r,loading:s})})})})]})};export{Ee as default};

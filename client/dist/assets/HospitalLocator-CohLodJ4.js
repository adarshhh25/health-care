import{c as N,a as w,r as g,j as e,m as y,B as j,M as b,g as L,h as B,i as v}from"./index-Dz-RQC1z.js";import{C as f}from"./Card-BNInW5pe.js";import{I as _,S as F}from"./Select-1C5k4zr3.js";import{findNearestHospitals as M}from"./api-ebqt3Pvv.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=N("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=N("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=N("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),I=({onSubmit:a,loading:c})=>{const{t}=w(),[i,d]=g.useState({latitude:"",longitude:""}),[n,h]=g.useState("5"),[u,x]=g.useState(!1),[r,s]=g.useState(""),p=[{value:"3",label:t("hospitals.form.options.limit_3")},{value:"5",label:t("hospitals.form.options.limit_5")},{value:"10",label:t("hospitals.form.options.limit_10")},{value:"15",label:t("hospitals.form.options.limit_15")},{value:"20",label:t("hospitals.form.options.limit_20")}],S=()=>{if(!navigator.geolocation){s(t("hospitals.errors.geolocation_unsupported"));return}x(!0),s(""),navigator.geolocation.getCurrentPosition(l=>{const o=l.coords.latitude,m=l.coords.longitude;d({latitude:o.toString(),longitude:m.toString()}),x(!1),a&&a({latitude:o,longitude:m,limit:parseInt(n)})},l=>{console.error("Geolocation error:",l);let o=t("hospitals.errors.location_error");l.code===1?o=t("hospitals.errors.permission_denied"):l.code===2?o=t("hospitals.errors.unavailable"):l.code===3&&(o=t("hospitals.errors.timeout")),s(`${o} ${t("hospitals.errors.manual_input")}`),x(!1)},{enableHighAccuracy:!0,timeout:1e4})},C=l=>{l.preventDefault();const o=parseFloat(i.latitude),m=parseFloat(i.longitude);if(isNaN(o)||isNaN(m)){s(t("hospitals.errors.invalid_coords"));return}if(o<-90||o>90||m<-180||m>180){if(o<-90||o>90||m<-180||m>180){s(t("hospitals.errors.invalid_range"));return}return}s(""),a({latitude:o,longitude:m,limit:parseInt(n)})};return e.jsxs(y.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[e.jsx(j,{type:"button",variant:"secondary",icon:k,onClick:S,loading:u,className:"w-full sm:w-auto",children:t(u?"common.getting_location":"common.u_location")}),e.jsx("span",{className:"text-gray-500 text-sm",children:t("common.or_enter_manually")})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(_,{label:t("common.latitude"),type:"number",step:"any",placeholder:t("hospitals.placeholders.latitude"),value:i.latitude,onChange:l=>d({...i,latitude:l.target.value}),icon:b,required:!0}),e.jsx(_,{label:t("common.longitude"),type:"number",step:"any",placeholder:t("hospitals.placeholders.longitude"),value:i.longitude,onChange:l=>d({...i,longitude:l.target.value}),icon:b,required:!0})]}),e.jsx(F,{label:t("hospitals.form.limit"),options:p,value:n,onChange:l=>h(l.target.value)}),r&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:r}),e.jsx(j,{type:"submit",fullWidth:!0,size:"lg",loading:c,icon:H,children:t("hospitals.form.find_btn")})]})},$=({hospital:a,index:c})=>{const{t}=w(),{name:i,address:d,distance_km:n,latitude:h,longitude:u,phone:x}=a,r=()=>n<5?"bg-green-100 text-green-800 border-green-200":n<10?"bg-amber-100 text-amber-800 border-amber-200":"bg-red-100 text-red-800 border-red-200",s=()=>{const p=`https://www.google.com/maps/dir/?api=1&destination=${h},${u}`;window.open(p,"_blank","noopener,noreferrer")};return e.jsx(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:c*.1},children:e.jsx(f,{className:"h-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-14 h-14 bg-green-50 rounded-2xl flex items-center justify-center",children:e.jsx(b,{className:"w-7 h-7 text-[#48BB78]"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3 mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 line-clamp-2",children:i}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-bold border whitespace-nowrap ${r()}`,children:[n.toFixed(1)," km"]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:d}),e.jsxs("p",{className:"text-xs text-gray-400 mb-4",children:["ðŸ“ ",h.toFixed(4),", ",u.toFixed(4)]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(j,{variant:"secondary",size:"sm",icon:k,onClick:s,className:"flex-1 sm:flex-none",children:t("hospitals.card.directions")}),x&&e.jsx(j,{variant:"outline",size:"sm",icon:L,onClick:()=>window.location.href=`tel:${x}`,className:"flex-1 sm:flex-none",children:t("hospitals.card.call")})]})]})]})})})},G=()=>{const{t:a}=w(),[c,t]=g.useState(!1),[i,d]=g.useState([]),[n,h]=g.useState(null),u=async r=>{t(!0),d([]);try{const s=await M(r),p=s.data||s;p.hospitals&&p.hospitals.length>0?(d(p.hospitals),h({latitude:r.latitude,longitude:r.longitude}),v.success(a("hospitals.toasts.found",{count:p.hospitals.length}))):v.info(a("hospitals.toasts.none_found"))}catch(s){console.error("Search error:",s),v.error(s.message||a("hospitals.toasts.error"))}finally{t(!1)}},x=()=>{d([]),h(null)};return e.jsxs("div",{className:"min-h-screen bg-[#F7FAFC]",children:[e.jsx("section",{className:"bg-white border-b border-gray-100",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-green-50 rounded-2xl mb-4",children:e.jsx(b,{className:"w-8 h-8 text-[#48BB78]"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-3",children:a("hospitals.title")}),e.jsx("p",{className:"text-lg text-gray-600 max-w-xl mx-auto",children:a("hospitals.subtitle")})]})})}),e.jsx("section",{className:"py-8 sm:py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[i.length===0&&!c&&e.jsx(f,{children:e.jsx(I,{onSubmit:u,loading:c})}),c&&e.jsx(f,{children:e.jsx(B,{message:a("hospitals.loading"),size:"default"})}),i.length>0&&!c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[i.length," ",a("hospitals.found_msg")]}),n&&e.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[a("hospitals.near")," ",n.latitude.toFixed(4),", ",n.longitude.toFixed(4)]})]}),e.jsxs("button",{onClick:x,className:"text-[#2B6CB0] font-semibold hover:underline",children:["â† ",a("common.new_search")]})]}),e.jsx("div",{className:"space-y-4",children:i.map((r,s)=>e.jsx($,{hospital:r,index:s},s))})]}),i.length===0&&!c&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-8",children:e.jsxs(f,{className:"text-center py-12",hover:!1,children:[e.jsx(q,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:a("hospitals.empty_state")})]})})]})})]})};export{G as default};

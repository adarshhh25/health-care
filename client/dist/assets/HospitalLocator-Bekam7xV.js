import{c as N,a as w,r as g,j as e,m as y,B as v,M as j,g as L,h as M,i as b}from"./index-BSYKhbqh.js";import{C as f}from"./Card-DTZjnm11.js";import{I as _,S as F}from"./Select-DL8hYxlV.js";import{findNearestHospitals as q}from"./api-ebqt3Pvv.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=N("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=N("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=N("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),$=({onSubmit:a,loading:c})=>{const{t}=w(),[l,d]=g.useState({latitude:"",longitude:""}),[r,h]=g.useState("5"),[u,x]=g.useState(!1),[n,s]=g.useState(""),p=[{value:"3",label:t("hospitals.form.options.limit_3")},{value:"5",label:t("hospitals.form.options.limit_5")},{value:"10",label:t("hospitals.form.options.limit_10")},{value:"15",label:t("hospitals.form.options.limit_15")},{value:"20",label:t("hospitals.form.options.limit_20")}],S=()=>{if(!navigator.geolocation){s(t("hospitals.errors.geolocation_unsupported"));return}x(!0),s(""),navigator.geolocation.getCurrentPosition(o=>{const i=o.coords.latitude,m=o.coords.longitude;d({latitude:i.toString(),longitude:m.toString()}),x(!1),a&&a({latitude:i,longitude:m,limit:parseInt(r)})},o=>{console.error("Geolocation error:",o);let i=t("hospitals.errors.location_error");o.code===1?i=t("hospitals.errors.permission_denied"):o.code===2?i=t("hospitals.errors.unavailable"):o.code===3&&(i=t("hospitals.errors.timeout")),s(`${i} ${t("hospitals.errors.manual_input")}`),x(!1)},{enableHighAccuracy:!0,timeout:1e4})},C=o=>{o.preventDefault();const i=parseFloat(l.latitude),m=parseFloat(l.longitude);if(isNaN(i)||isNaN(m)){s(t("hospitals.errors.invalid_coords"));return}if(i<-90||i>90||m<-180||m>180){if(i<-90||i>90||m<-180||m>180){s(t("hospitals.errors.invalid_range"));return}return}s(""),a({latitude:i,longitude:m,limit:parseInt(r)})};return e.jsxs(y.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[e.jsx(v,{type:"button",variant:"secondary",icon:k,onClick:S,loading:u,className:"w-full sm:w-auto",children:t(u?"common.getting_location":"common.u_location")}),e.jsx("span",{className:"text-gray-500 text-sm",children:t("common.or_enter_manually")})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(_,{label:t("common.latitude"),type:"number",step:"any",placeholder:t("hospitals.placeholders.latitude"),value:l.latitude,onChange:o=>d({...l,latitude:o.target.value}),icon:j,required:!0}),e.jsx(_,{label:t("common.longitude"),type:"number",step:"any",placeholder:t("hospitals.placeholders.longitude"),value:l.longitude,onChange:o=>d({...l,longitude:o.target.value}),icon:j,required:!0})]}),e.jsx(F,{label:t("hospitals.form.limit"),options:p,value:r,onChange:o=>h(o.target.value)}),n&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm",children:n}),e.jsx(v,{type:"submit",fullWidth:!0,size:"lg",loading:c,icon:I,children:t("hospitals.form.find_btn")})]})},z=({hospital:a,index:c})=>{const{t}=w(),{name:l,address:d,distance_km:r,latitude:h,longitude:u,phone:x}=a,n=()=>r<5?"bg-green-900/20 text-green-400 border-green-800":r<10?"bg-amber-900/20 text-amber-400 border-amber-800":"bg-red-900/20 text-red-400 border-red-800",s=()=>{const p=`https://www.google.com/maps/dir/?api=1&destination=${h},${u}`;window.open(p,"_blank","noopener,noreferrer")};return e.jsx(y.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:c*.1},children:e.jsx(f,{className:"h-full",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-14 h-14 bg-[var(--color-secondary)]/10 rounded-2xl flex items-center justify-center",children:e.jsx(j,{className:"w-7 h-7 text-[var(--color-secondary)]"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-3 mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-[var(--color-text-primary)] line-clamp-2",children:l}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-bold border whitespace-nowrap ${n()}`,children:[r.toFixed(1)," km"]})]}),e.jsx("p",{className:"text-[var(--color-text-secondary)] text-sm mb-4 line-clamp-2",children:d}),e.jsxs("p",{className:"text-xs text-[var(--color-text-tertiary)] mb-4",children:["ðŸ“ ",h.toFixed(4),", ",u.toFixed(4)]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(v,{variant:"secondary",size:"sm",icon:k,onClick:s,className:"flex-1 sm:flex-none",children:t("hospitals.card.directions")}),x&&e.jsx(v,{variant:"outline",size:"sm",icon:L,onClick:()=>window.location.href=`tel:${x}`,className:"flex-1 sm:flex-none",children:t("hospitals.card.call")})]})]})]})})})},U=()=>{const{t:a}=w(),[c,t]=g.useState(!1),[l,d]=g.useState([]),[r,h]=g.useState(null),u=async n=>{t(!0),d([]);try{const s=await q(n),p=s.data||s;p.hospitals&&p.hospitals.length>0?(d(p.hospitals),h({latitude:n.latitude,longitude:n.longitude}),b.success(a("hospitals.toasts.found",{count:p.hospitals.length}))):b.info(a("hospitals.toasts.none_found"))}catch(s){console.error("Search error:",s),b.error(s.message||a("hospitals.toasts.error"))}finally{t(!1)}},x=()=>{d([]),h(null)};return e.jsxs("div",{className:"min-h-screen bg-[var(--color-background)]",children:[e.jsx("section",{className:"bg-[var(--color-surface)] border-b border-[var(--color-border)]",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-[var(--color-secondary)]/10 rounded-2xl mb-4",children:e.jsx(j,{className:"w-8 h-8 text-[var(--color-secondary)]"})}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-[var(--color-text-primary)] mb-3",children:a("hospitals.title")}),e.jsx("p",{className:"text-lg text-[var(--color-text-secondary)] max-w-xl mx-auto",children:a("hospitals.subtitle")})]})})}),e.jsx("section",{className:"py-8 sm:py-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.length===0&&!c&&e.jsx(f,{children:e.jsx($,{onSubmit:u,loading:c})}),c&&e.jsx(f,{children:e.jsx(M,{message:a("hospitals.loading"),size:"default"})}),l.length>0&&!c&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-[var(--color-text-primary)]",children:[l.length," ",a("hospitals.found_msg")]}),r&&e.jsxs("p",{className:"text-[var(--color-text-secondary)] text-sm mt-1",children:[a("hospitals.near")," ",r.latitude.toFixed(4),", ",r.longitude.toFixed(4)]})]}),e.jsxs("button",{onClick:x,className:"text-[var(--color-primary)] font-semibold hover:underline",children:["â† ",a("common.new_search")]})]}),e.jsx("div",{className:"space-y-4",children:l.map((n,s)=>e.jsx(z,{hospital:n,index:s},s))})]}),l.length===0&&!c&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"mt-8",children:e.jsxs(f,{className:"text-center py-12",hover:!1,children:[e.jsx(H,{className:"w-16 h-16 text-[var(--color-text-tertiary)] mx-auto mb-4"}),e.jsx("p",{className:"text-[var(--color-text-secondary)]",children:a("hospitals.empty_state")})]})})]})})]})};export{U as default};
